# DocVector Environment Configuration

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# PostgreSQL
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=docvector
POSTGRES_PASSWORD=change-me-in-production
POSTGRES_DB=docvector
DATABASE_URL=postgresql+asyncpg://docvector:change-me-in-production@postgres:5432/docvector

# ==============================================================================
# VECTOR DATABASE (Qdrant)
# ==============================================================================

QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_COLLECTION=documents

# ==============================================================================
# REDIS (Cache & Message Broker)
# ==============================================================================

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=change-me-in-production
REDIS_URL=redis://:change-me-in-production@redis:6379/0

# ==============================================================================
# API SERVER
# ==============================================================================

API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=false

# Secret key for JWT tokens (generate with: openssl rand -hex 32)
API_SECRET_KEY=change-me-to-a-random-string-min-32-characters-long

# CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# ==============================================================================
# EMBEDDING CONFIGURATION
# ==============================================================================

# Provider: 'local', 'openai', 'cohere'
EMBEDDING_PROVIDER=local

# For local embeddings (sentence-transformers)
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384
EMBEDDING_BATCH_SIZE=32
EMBEDDING_DEVICE=cpu  # or 'cuda' for GPU

# For OpenAI embeddings (optional)
# OPENAI_API_KEY=sk-...
# EMBEDDING_MODEL=text-embedding-3-small
# EMBEDDING_DIMENSION=1536

# For Cohere embeddings (optional)
# COHERE_API_KEY=...
# EMBEDDING_MODEL=embed-english-v3.0

# ==============================================================================
# SEARCH CONFIGURATION
# ==============================================================================

SEARCH_DEFAULT_LIMIT=10
SEARCH_MAX_LIMIT=100
SEARCH_HYBRID_ENABLED=true
SEARCH_VECTOR_WEIGHT=0.7
SEARCH_KEYWORD_WEIGHT=0.3
SEARCH_MIN_SCORE=0.5

# ==============================================================================
# PROCESSING CONFIGURATION
# ==============================================================================

CHUNK_SIZE=512
CHUNK_OVERLAP=50
CHUNKING_STRATEGY=semantic  # 'fixed', 'semantic', 'hierarchical'

# ==============================================================================
# CELERY (Async Tasks)
# ==============================================================================

CELERY_BROKER_URL=redis://:change-me-in-production@redis:6379/0
CELERY_RESULT_BACKEND=redis://:change-me-in-production@redis:6379/1
CELERY_TASK_ALWAYS_EAGER=false  # Set to true for synchronous testing

# ==============================================================================
# CRAWLER SETTINGS
# ==============================================================================

CRAWLER_MAX_DEPTH=3
CRAWLER_MAX_PAGES=1000
CRAWLER_CONCURRENT_REQUESTS=10
CRAWLER_RESPECT_ROBOTS_TXT=true
CRAWLER_USER_AGENT=DocVector/1.0 (+https://github.com/your-org/docvector)

# ==============================================================================
# LOGGING
# ==============================================================================

LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # 'json' or 'text'

# ==============================================================================
# MONITORING (Optional)
# ==============================================================================

# Prometheus metrics
ENABLE_METRICS=true
METRICS_PORT=9090

# Sentry error tracking (optional)
# SENTRY_DSN=https://...

# ==============================================================================
# RATE LIMITING
# ==============================================================================

RATE_LIMIT_ENABLED=true
RATE_LIMIT_SEARCH_PER_MINUTE=100
RATE_LIMIT_INGESTION_PER_MINUTE=10
RATE_LIMIT_DEFAULT_PER_MINUTE=1000

# ==============================================================================
# STORAGE
# ==============================================================================

# Local filesystem or S3-compatible
STORAGE_BACKEND=local  # 'local' or 's3'
STORAGE_LOCAL_PATH=/app/uploads

# S3 configuration (optional)
# STORAGE_BACKEND=s3
# S3_ENDPOINT_URL=https://s3.amazonaws.com
# S3_BUCKET=docvector-documents
# S3_ACCESS_KEY=...
# S3_SECRET_KEY=...
# S3_REGION=us-east-1

# ==============================================================================
# AUTHENTICATION
# ==============================================================================

# Enable authentication (true/false)
AUTH_ENABLED=false

# JWT settings
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=1440  # 24 hours

# ==============================================================================
# DEVELOPMENT SETTINGS
# ==============================================================================

# Set to 'development' or 'production'
ENVIRONMENT=development

# Enable debug mode (never in production!)
DEBUG=false
